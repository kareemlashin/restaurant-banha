if (self.CavalryLogger) { CavalryLogger.start_js(["sIWlk"]); }

__d("RTWebCallWindowOpener",["requireCond","cr:1099565"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1099565")}),null);
__d("ZenonCallInviteModel",["BaseEventEmitter","FBLogger"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonCallInviteModel3=function(a){b("FBLogger")("rtc_www").info("Received cancel for: ",a.ringID);if(d.__currentRequest&&d.__currentRequest.model&&d.__currentRequest.model.ringID===a.ringID)switch(a.reason){case"hangup":d.__currentRequest.model=babelHelpers["extends"]({},d.__currentRequest.model,{type:"missed"});d.emit("callInvite",d.__currentRequest.model);break;default:d.dismiss();break}};d.$ZenonCallInviteModel2=function(a){var c;b("FBLogger")("rtc_www").info("Receiving ring: ",a.ringID);if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.type)==="ringing"){if(((c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)!==a.ringID){a.onDecline("InAnotherCall");b("FBLogger")("rtc_www").info("Sending InAnotherCall to ring: ",a.ringID,"Current ring: ",(c=d.__currentRequest)==null?void 0:(c=c.model)==null?void 0:c.ringID)}}else d.__currentRequest={model:{controllerParams:a.controllerParams,inviterID:a.inviterID,participants:a.otherParticipants,requestingVideo:a.requestingVideo,ringID:a.ringID,thread:a.thread,type:a.isClientPermissableRing?"ringing":"unsupported_browser"},ringPayload:a},d.emit("callInvite",d.__currentRequest.model),a.isClientPermissableRing||a.onDecline("VersionUnsupported")};d.__eventSource=c;d.__currentRequest=null;return d}var d=c.prototype;d.getCurrentInvite=function(){var a;return(a=(a=this.__currentRequest)==null?void 0:a.model)!=null?a:null};d.startListening=function(a){a=a.callsBlocked;this.__currentRequest&&this.dismiss();this.stopListening();a?this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel1):(this.__eventSource.addListener("incomingRing",this.$ZenonCallInviteModel2),this.__eventSource.addListener("ringCancel",this.$ZenonCallInviteModel3))};d.stopListening=function(){this.__eventSource.removeAllListeners("incomingRing"),this.__eventSource.removeAllListeners("ringCancel"),this.__currentRequest=null};d.dismiss=function(){var a;b("FBLogger")("rtc_www").info("Dismissing ring: ",(a=this.__currentRequest)==null?void 0:(a=a.model)==null?void 0:a.ringID);this.__currentRequest=null;this.emit("callInvite",Object.freeze(null))};d.accept=function(a,c){var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Accepting ring: ",(e=d.model)==null?void 0:e.ringID);((e=d.model)==null?void 0:e.type)==="ringing"&&d.ringPayload.onAccept(a,c);this.dismiss()}};d.decline=function(a,c){a===void 0&&(a="IgnoreCall");var d=this.__currentRequest;if(d){var e;b("FBLogger")("rtc_www").info("Declining ring: ",(e=d.model)==null?void 0:e.ringID);d.ringPayload.onDecline(a,c);this.dismiss();return}};d.$ZenonCallInviteModel1=function(a){b("FBLogger")("rtc_www").info("Blocking ring: ",a.ringID),a.onDecline("IgnoreCall","CallsBlocked")};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("delegateZenonCallInviteModel",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.getCurrentInvite=b.getCurrentInvite.bind(b),a.startListening=b.startListening.bind(b),a.stopListening=b.stopListening.bind(b),a.dismiss=b.dismiss.bind(b),a.accept=b.accept.bind(b),a.decline=b.decline.bind(b),b.addListener("callInvite",function(b){a.emit("callInvite",b)})}e.exports=a}),null);
__d("ZenonCallWindowController",["Promise","FBLogger","ZenonCallWindowErrors"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonCallWindowErrors").OpeningAnotherCallError;a=function(){function a(a,b){var c=b.callWindowInitializerResource,d=b.callWindowOpener;b=b.uriBuilderResource;this.$2=null;this.$3=!1;this.$5=null;this.$1=a;this.$7=b;this.$4=c;this.$6=d}var c=a.prototype;c.initCall=function(a){var c=this;if(this.$3)throw new g();try{if(this.$2&&!this.$2.closed&&a.joinContext.type==="thread"&&this.$2.inCallWith===a.joinContext.thread.id){this.$2.focus();return[this.$2,b("Promise").resolve()]}}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Failed to access inCallWith on call window")}var d=this.$6.openWindow(a);this.$2&&(this.$2.closed||this.$2.close(),this.$2=null);this.$2=d;this.$3=!0;return[d,b("Promise").all([this.$7.load(),this.$4.load()]).then(function(b){var d=b[0];b=b[1];c.$5===null&&(c.$5=new b(c.$1,new d(c.$1)));return c.$5.initCall(c.$2,a)})["finally"](function(){c.$3=!1})]};return a}();e.exports=a}),null);
__d("ZenonParentCallSummaryLogProcessor",["CurrentUser","FBRTCCallSummaryStore","ZenonCallSummary","ZenonDismissReason","gkx","pageID"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonDismissReason").ZenonDismissReason;a=function(){function a(a){this.$2=b("FBRTCCallSummaryStore").getInstance(),this.$3=a.protocol,this.$3==="mw"&&(a.peerID="MW_PEER_ID"),this.$1=new(b("ZenonCallSummary"))(a)}var c=a.prototype;c.$4=function(a){if(a!=null){a=a.deviceID;a=a==="mobile";this.$1.setIsPeerMobile(a)}};c.processEvent=function(a){switch(a.name){case"inviteResponded":this.$1.onInviteResponded();break;case"inviteReceived":this.$1.onInviteReceived();this.$4(a.remoteDeviceInfo);break;case"callEnded":this.$5(a);break;case"callAccepted":this.$1.onCallAccepted(a.trigger);this.$1.save(this.$2);break;case"popupOpened":this.$6(a);this.$1.save(this.$2);break}};c.$6=function(a){this.$1.setInitByPageID(b("pageID")),this.$1.setInitByAppID(b("CurrentUser").getAppID()),this.$1.onCallEnded(g.CLIENT_ERROR,!1,!0,a.isPopupBlocked?"PopupBlocked":"PopupPending"),this.$1.save(this.$2)};c.$5=function(a){if(this.$3==="mw"&&a.isRemoteEnded)return;var c=a.endCallReason,d=a.isRemoteEnded;a=a.endCallSubreason;var e=b("gkx")("1148995");if(!e&&c===g.OTHER_INSTANCE_HANDLED&&d)return;this.$1.onCallEnded(c,d,!1,a);this.$1.save(this.$2)};return a}();e.exports=a}),null);
__d("ZenonCollisionContext",[],(function(a,b,c,d,e,f){function a(a){var b=null;a.groupThreadID!=null?b={id:a.groupThreadID,type:2}:a.peerID!=null&&(b={id:a.peerID,type:1});return b}e.exports={getThreadIDAndTypeFromCollisionContext:a}}),null);
__d("LazyLoadInstance",["promiseDone"],(function(a,b,c,d,e,f){"use strict";var g={NOT_READY:0,LOADING:1,READY:2};a=function(){function a(a,b){this.$1={instantiate:b,moduleReference:a,stage:g.NOT_READY}}var c=a.prototype;c.get=function(a){switch(this.$1.stage){case g.NOT_READY:b("promiseDone")(this.$2(this.$1),a);break;case g.LOADING:b("promiseDone")(this.$1.instancePromise,a);break;case g.READY:a(this.$1.instance);break}};c.getNow=function(){return this.$1.stage===g.READY?this.$1.instance:null};c.preload=function(){this.$1.stage===g.NOT_READY&&this.$2(this.$1)};c.$2=function(a){var b=this,c=a.instantiate;a=a.moduleReference;a=a.load().then(function(a){a=c(a);b.$1={instance:a,stage:g.READY};return a});this.$1={instancePromise:a,stage:g.LOADING};return a};return a}();e.exports=a}),null);
__d("ZenonOfferStorage",["CacheStorage"],(function(a,b,c,d,e,f){var g="localstorage",h="RTC_",i="offer",j="offer_msg",k={writePeerOfferToStorage:function(a,b){a=k.getStorage(a,j);k._storeData(a,i,b)},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=k}),null);
__d("ZenonParentSignalingClient",["ZenonDebugLogger","ZenonSignalingTypes","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonSignalingTypes").ZenonRemoteSdpResponseStatus;a=function(){function a(a,c,d,e){var f=this;this.remoteSignalingID=null;this.$4="init";this.$6=null;this.$7=null;this.$8=function(){};this.$9=function(a,c,d){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",f.$4,"received "+a.eventName,f.$1);switch(a.eventName){case"inviteRequest":f.$11(a,c,d);break;case"remoteSdpRequest":f.$12(a,c);break;case"terminateRequest":f.$13(a,c,d);break}};this.$1=a;this.$3=d;this.$5=e;this.$2=c;c.setReceiver(this.$9)}var c=a.prototype;c.setSignalingEventHandlers=function(a){if(this.$6!=null){b("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$6=a};c.setLoggingEventHandler=function(a){this.$8=a};c.getSignalingId=function(){return this.$1};c.sendDismiss=function(a){this.$4="terminated";a={eventName:"terminateRequest",reason:a,shouldInformPeer:!0,fromJoinResponse:!1};this.$10(a)};c.receiveMessage=function(a){this.$2.receiveMessage(a)};c.isTerminated=function(){return this.$4=="terminated"};c.sendAnswerIntent=function(){if(this.$4=="inviteAcknowledged"){this.$4="answered";var a={eventName:"answerIntentRequest"};this.$10(a)}else throw b("unrecoverableViolation")("sendAnswerIntent called in unexpected state "+this.$4,"rtc_www")};c.respondToInvite=function(a){if(this.$4=="inviteReceived"){if(this.$7==null)throw b("unrecoverableViolation")("respondToInvite called without inviteMessageId being populated first","rtc_www");this.$4="inviteAcknowledged";a={eventName:"inviteResponse",ackMessageId:this.$7,status:a};this.$10(a)}else throw b("unrecoverableViolation")("respondToInvite called in unexpected state "+this.$4,"rtc_www")};c.sendInvite=function(a,c){throw b("unrecoverableViolation")("sendInvite called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendSdp=function(a,c){throw b("unrecoverableViolation")("sendSdp called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendIceCandidate=function(a){throw b("unrecoverableViolation")("sendIceCandidate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendMediaUpdate=function(a){throw b("unrecoverableViolation")("sendMediaUpdate called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendAddParticipantsMessage=function(a){throw b("unrecoverableViolation")("sendAddParticipantsMessage called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.sendClientInfo=function(a){throw b("unrecoverableViolation")("sendClientInfo called on ZenonParentSignalingClient. Did you mean to use ZenonSignalingClient instead?","rtc_www")};c.$10=function(a){b("ZenonDebugLogger").getInstance().logStateMachine("ParentSignalingClient",this.$4,"sending "+a.eventName,this.$1),this.$3.sendEvent(a)};c.$11=function(a,b,c){this.$4=="init"&&(this.$4="inviteReceived",this.$7=b,this.$5(a,c,this))};c.$13=function(a,b,c){if(this.$4!="terminated"){this.$4="terminated";c={eventName:"dismissResponse",ackMessageId:b};this.$3.sendEvent(c);this.$6&&this.$6.onDismissReceived&&this.$6.onDismissReceived(this.$1,a.reason)}};c.$12=function(a,b){b={eventName:"remoteSdpResponse",ackMessageId:b,type:a.sdp.type,acknowledgedVersion:a.sdp.version,negotiateType:a.negotiateType,status:g.OK};this.$3.sendEvent(b)};return a}();e.exports=a}),null);
__d("ZenonParentCallsManager",["BaseEventEmitter","JSResource","LazyLoadInstance","ZenonCallLogger","ZenonCollisionContext","ZenonDismissReason","ZenonOfferStorage","ZenonP2PMessageTypes","ZenonParentCallSummaryLogProcessor","ZenonParentSignalingClient","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("ZenonCollisionContext").getThreadIDAndTypeFromCollisionContext,h=b("ZenonDismissReason").ZenonDismissReason,i=b("ZenonDismissReason").endCallToDismissReason,j=b("ZenonP2PMessageTypes").ZenonP2PSignalingPayloadType;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$ZenonParentCallsManager4=new Map();d.$ZenonParentCallsManager5=new Set();d.$ZenonParentCallsManager6=new Map();d.$ZenonParentCallsManager7=new Map();d.$ZenonParentCallsManager8=new Map();d.getRawP2PMessages=function(a){return(a=d.$ZenonParentCallsManager7.get(a))!=null?a:null};d.getMWRingRequest=function(a){return(a=d.$ZenonParentCallsManager6.get(a))!=null?a:null};d.onInviteReceived=function(a,b,c){var e=c.getSignalingId();c.setSignalingEventHandlers({onDismissReceived:d.onDismissReceived});var f=a.inviterID,h=a.otherParticipants,i=a.requestingVideo;a=a.roomInfo;var j="zenon_incoming_call_dialog",k=d.$ZenonParentCallsManager9({protocol:b,peerID:f,isCaller:!1,callTrigger:j,callID:e,isVideo:i});k.log({name:"inviteReceived"});j=d.$ZenonParentCallsManager3.isSupportedClientForProtocol(b);var l=j?"OK":"NOT_SUPPORTED";c.respondToInvite(l);k.log({name:"inviteResponded"});l={id:"0",type:2};if(a.context){var m;l=(m=g(a.context))!=null?m:l}l={ringID:e,inviterID:f,otherParticipants:h,requestingVideo:i,thread:l,isClientPermissableRing:j,onAccept:function(a,g){var h=g.isPopupBlocked;g=g.trigger;k.log({name:"callAccepted",trigger:g});d.$ZenonParentCallsManager11(f);c.sendAnswerIntent();d.$ZenonParentCallsManager10(a,{isVideo:i,protocol:b,isPopupBlocked:h,callTrigger:g,callID:e,peerID:f})},onDecline:function(a,b){b===void 0&&(b=null),d.onDecline(e,k,a,b)},controllerParams:{callContext:a.name,callID:e,serverInfoData:(h=(m=a.context)==null?void 0:m.serverInfoData)!=null?h:null,configuration:b}};d.emit("incomingRing",l)};d.onDismissReceived=function(a,b){var c=d.$ZenonParentCallsManager12(b);c={ringID:a,reason:c};d.emit("ringCancel",c);c=d.$ZenonParentCallsManager4.get(a);c!=null&&c.log({name:"callEnded",endCallReason:b,isRemoteEnded:!0})};d.$ZenonParentCallsManager3=c;d.$ZenonParentCallsManager2=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingParentTransport").__setRef("ZenonParentCallsManager"),function(a){a=new a();a.init(d.getRawP2PMessages,d.getMWRingRequest);return a});d.$ZenonParentCallsManager1=new(b("LazyLoadInstance"))(b("JSResource")("ZenonSignalingClientManager").__setRef("ZenonParentCallsManager"),function(a){return new a(b("ZenonParentSignalingClient"),d.onInviteReceived)});return d}var d=c.prototype;d.startOutgoingCallIntent=function(a,b){var c=b.peerID,d=b.callID,e=b.callTrigger,f=b.protocol,g=b.isVideo;this.$ZenonParentCallsManager9({peerID:c,callID:d,callTrigger:e,protocol:f,isCaller:!0,isVideo:g});this.$ZenonParentCallsManager10(a,b)};d.$ZenonParentCallsManager9=function(a){var c=a.callID,d=a.callTrigger,e=a.isCaller,f=a.peerID,g=a.protocol;a=a.isVideo;var h=this.$ZenonParentCallsManager4.get(c);!h?(h=new(b("ZenonCallLogger"))({callID:c,peerID:f,callTrigger:d,isCaller:e,protocol:g,isVideo:a},[b("ZenonParentCallSummaryLogProcessor")]),this.$ZenonParentCallsManager4.set(c,h)):b("recoverableViolation")("Call logger key collision in parentCallsManager for callID: "+c,"rtc_www");return h};d.$ZenonParentCallsManager10=function(a,b){var c=b.callID;b.isVideo;b=b.isPopupBlocked;this.$ZenonParentCallsManager2.get(function(b){b.verificationNonce=a});this.$ZenonParentCallsManager5.add(c);c=this.$ZenonParentCallsManager4.get(c);c!=null&&c.log({name:"popupOpened",isPopupBlocked:b})};d.initListeners=function(a){var b=this;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.subscribe(function(a){return b.onMessageReceived(a)},function(a){return b.onRawP2PMessageReceived(a)},function(a){return b.onRawMWMessageReceived(a)})}};d.onMessageReceived=function(a){var b=a.getHeader().signalingID;if(b!=null&&this.$ZenonParentCallsManager5.has(b))return;this.$ZenonParentCallsManager1.get(function(b){b.receiveMessage(a)})};d.onRawP2PMessageReceived=function(a){var b=String(a.from);if(a.msg_type!==j.OFFER){var c=this.$ZenonParentCallsManager7.get(b);c||(c=[],this.$ZenonParentCallsManager7.set(b,c));c.push(a)}else this.$ZenonParentCallsManager8.set(b,a)};d.onRawMWMessageReceived=function(a){var b=a.jsonPayload,c=b.header;b=b.body;b=b.ringRequest;if(b){b=c.conferenceName;this.$ZenonParentCallsManager6.set(b,a)}};d.onDecline=function(a,c,d,e){e===void 0&&(e=null),this.$ZenonParentCallsManager1.get(function(f){f=f.getSignalingClient(a);if(f){var g=i(d);d!=="NoAnswerTimeout"&&d!=="VersionUnsupported"&&e!=="CallsBlocked"&&f.sendDismiss(g);c.log({name:"callEnded",endCallReason:g,isRemoteEnded:!1,endCallSubreason:e})}else b("recoverableViolation")("signaling client should be defined","rtc_www")})};d.removeListeners=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}};d.$ZenonParentCallsManager12=function(a){switch(a){case h.OTHER_INSTANCE_HANDLED:case h.ANSWERED_ON_ANOTHER_DEVICE:case h.REJECTED_ON_ANOTHER_DEVICE:return"other_dismiss";default:return"hangup"}};d.$ZenonParentCallsManager11=function(a){var c=this.$ZenonParentCallsManager8.get(a);c&&b("ZenonOfferStorage").writePeerOfferToStorage(a,c)};return c}(b("BaseEventEmitter"));e.exports=a}),null);
__d("MercuryIgnoredBlockedParticipants.re",["bs_curry","MercuryIgnoredBlockedParticipants.bs"],(function(a,b,c,d,e,f){a=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs,a,c,d);return a};f.qualifiesAs=a;c=function(a,c,d){a=b("bs_curry")._3(b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock,a,c,d);return a};f.shouldShowBlock=c}),null);
__d("MessengerGroupUtils.bs",["MessengerView","SearchableEntry","MessengerActions","MessengerComposerActions"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=a.filter(function(a,b,d){if(a==null)return!1;else return a.fbid!==c});a.forEach(function(a,c,d){c={uniqueID:a.fbid,title:a.name,auxiliaryData:0};d=new(b("SearchableEntry"))(c);b("MessengerComposerActions").addToken(d);return 0});b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);return 0}f.createGroupThread=a}),null);
__d("MessengerGroupUtils.re",["bs_curry","MessengerGroupUtils.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerGroupUtils.bs").createGroupThread,a,c);return a};f.createGroupThread=a}),null);
__d("WorkForeignEntityInfo.re",["WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){a=b("WorkForeignEntityInfo.bs").isCoworker;f.isCoworker=a;c=b("WorkForeignEntityInfo.bs").areAllCoworkers;f.areAllCoworkers=c}),null);
__d("WIGFileSelector.react",["CometFileSelector.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx(b("CometFileSelector.react"),babelHelpers["extends"]({},a))}e.exports=a}),null);
__d("WIGFRX.entrypoint",["CometFRXQuery$Parameters","JSResource"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.entryPoint,d=a.id,e=a.location;a=a.responsible_id;return{queries:{frx:{parameters:b("CometFRXQuery$Parameters"),variables:{input:{entry_point:c,id:d,location:e,responsible_id:a}}}}}},root:b("JSResource")("WIGFRX.react").__setRef("WIGFRX.entrypoint")};e.exports=a}),null);
__d("useWIGEntryPointDialog",["useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";a=b("useCometEntryPointDialog");e.exports=a}),null);
__d("WorkGalahadAsyncStatefulActionHelper",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useReducer;function h(a,b){switch(b.type){case"reset":return{loading:!1,requested:!1,error:null};case"startAction":return babelHelpers["extends"]({},a,{loading:!0,error:null});case"actionSuccess":return babelHelpers["extends"]({},a,{loading:!1,requested:!0});case"actionFailed":return babelHelpers["extends"]({},a,{loading:!1,requested:!0,error:b.error});default:return a}}c={useAsyncActionReducer:function(){var a=g(h,{loading:!1,requested:!1,error:null}),b=a[0],c=b.error,d=b.loading;b=b.requested;a=a[1];var e=!d&&b&&c==null,f=!d&&b&&c!=null;return[{loading:d,requested:b,error:c,isSuccessful:e,isFailed:f},a]}};e.exports=c}),null);
__d("WorkGalahadBlockChatDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadConfirmBlockThreadDialog.react").__setRef("WorkGalahadBlockChatDropdownMenuItem.react");function a(a){var c=a.isBlocked,d=a.thread;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"block-chat",icons:"friend_block",label:c?g._("\u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631 \u0627\u0644\u0631\u0633\u0627\u0626\u0644"):g._("\u062d\u0638\u0631 \u0627\u0644\u0631\u0633\u0627\u0626\u0644"),onClick:function(){c?b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unblockOnMessengerDotCom(d.thread_id):e({thread:d})}})}e.exports=a}),null);
__d("WorkGalahadChangeChatEmojiDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeEmojiDialog.react").__setRef("WorkGalahadChangeChatEmojiDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"change-chat-emoji",icons:"emoji",label:g._("\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u062a\u0639\u0628\u064a\u0631\u064a"),onClick:function(){d({thread:c})}})}e.exports=a}),null);
__d("WorkGalahadChangeChatPhotoMenuItem.react",["fbt","AsyncRequest","FileInputUploader","LayerFadeOnHide","MercuryConfig","MercuryIDs","React","WIGFileSelector.react","WorkGalahadAsyncStatefulActionHelper","WorkGalahadDropdownMenuItem.react","XMessagingSetThreadImageController","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("React");var i=c.useCallback,j=b("WorkGalahadAsyncStatefulActionHelper").useAsyncActionReducer;function a(a){var c=a.desc,d=a.icons,e=a.label,f=a.threadID;a=j();var l=a[0],m=l.error,n=l.isFailed;l=l.loading;var o=a[1],p=i(function(){o({type:"actionFailed",error:g._("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0645\u064a\u0644.")})},[]),q=i(function(a,c){a=c.response.payload;a=(c=a.metadata[0])==null?void 0:c.image_id;if(!a)return;c=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(f),thread_image_id:a}).setHandler(function(){o({type:"actionSuccess"})}).setErrorHandler(function(a){p()}).send()},[f]),r=i(function(a){a=a[0];if(!a)return;o({type:"startAction"});a=new(b("FileInputUploader"))().setFiles({file:a}).setURI(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});a.subscribe("success",q);a.subscribe("failure",p);a.send()},[f,q,p]),s=null;a=function(a){var c=a.children;return h.jsxs(h.Fragment,{children:[h.jsx(b("WIGFileSelector.react"),{onFilesSelected:r,accept:["image/*"],children:function(a){s=a;return c}}),h.jsx(k,{shown:n,onHide:function(){o({type:"reset"})},description:m})]})};return h.jsx(b("WorkGalahadDropdownMenuItem.react"),{id:"chat-photo-upload",LinkRenderer:a,label:e,icons:d,desc:c,isLoading:l,hideOnClick:!1,onClick:function(){s&&s()}})}function k(a){var c=a.description,d=a.onHide;a=a.shown;return h.jsxs(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,onHide:d,shown:a,width:400,children:[h.jsx(b("XUIDialogTitle.react"),{children:g._("\u0641\u0634\u0644 \u062a\u063a\u064a\u064a\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")}),h.jsx(b("XUIDialogBody.react"),{children:c}),h.jsx(b("XUIDialogFooter.react"),{children:h.jsx(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})})]})}e.exports=a}),null);
__d("WorkGalahadCreateGroupFromChatMenuItem.react",["fbt","JSResource","MessengerParticipants.re","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadCreateGroupFromChatDialog.react").__setRef("WorkGalahadCreateGroupFromChatMenuItem.react");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(i);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"create-group",icons:"group_plus",label:g._("\u0625\u0646\u0634\u0627\u0621 \u0645\u062c\u0645\u0648\u0639\u0629"),onClick:function(){d({onClose:function(){},thread:c,participants:c.participants.map(b("MessengerParticipants.re").getNow).filter(Boolean)})}},"create-group")}e.exports=a}),null);
__d("WorkGalahadDeleteChatMenuItem.react",["fbt","JSResource","MessagingTag","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadDeleteChatHistoryDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),j=b("JSResource")("WorkGalahadHideChatDialog.react").__setRef("WorkGalahadDeleteChatMenuItem.react"),k=function(a){var c=a.showDescription,d=a.showHideButton,e=a.thread;a=b("useWIGLazyDialog")(i);var f=a[0];a={label:g._("\u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u0631\u0633\u0627\u0626\u0644"),desc:g._("\u064a\u0645\u0643\u0646\u0643 \u062d\u0630\u0641 \u0646\u0633\u062e\u062a\u0643 \u0645\u0646 \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0648\u0643\u0644 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0648\u062c\u0648\u062f\u0629 \u0628\u0647\u0627."),onClick:function(){f({showHideButton:d,thread:e,onClose:function(){}})}};if(!c){delete a.desc;return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({id:"delete-chat-history",icons:"trash"},a))}return h.jsx(b("WIGDropdownMenuItem.react"),babelHelpers["extends"]({id:"delete-chat-history"},a))},l=function(a){var c=a.thread;a=b("useWIGLazyDialog")(j);var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"hide-chat-permanently",label:g._("\u0625\u062e\u0641\u0627\u0621 \u062f\u0627\u0626\u0645"),desc:g._("\u0633\u064a\u062a\u0645 \u0646\u0642\u0644 \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0625\u0644\u0649 \"\u0625\u062e\u0641\u0627\u0621 \u062f\u0627\u0626\u0645\" \u0648\u0633\u062a\u0638\u0644 \u0645\u062e\u0641\u064a\u0629 \u062d\u062a\u0649 \u062a\u0642\u0648\u0645 \u0628\u0625\u0644\u063a\u0627\u0621 \u0625\u062e\u0641\u0627\u0626\u0647\u0627."),onClick:function(){d({thread:c,onClose:function(){}})}})};function a(a){a=a.thread;var c=a.folder===b("MessagingTag").OTHER;if(!a.is_subscribed||a.is_archived||c)return h.jsx(k,{showHideButton:!1,showDescription:!1,thread:a});var d=[];c||d.push(h.jsx(l,{thread:a},"hide-chat-permanently"));d.push(h.jsx(k,{showHideButton:!0,showDescription:!0,thread:a},"delete-chat-history"));return h.jsx(b("WIGDropdownMenuItem.react"),{id:"remove-chat",icons:"trash",label:g._("\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),items:d},"remove-chat")}e.exports=a}),null);
__d("WorkGalahadDropdownMenuHelper",["React","WIGDropdownMenuItem.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={createItemsFromSections:function(a,c){c===void 0&&(c="separator");return a.reduce(function(a,d){if(d.length===0)return a;if(a.length===0)return d;var e=a.length;return[].concat(a,[g.jsx(b("WIGDropdownMenuItem.react").Separator,{},c+"-"+e)],d)},[])}};e.exports=a}),null);
__d("WorkGalahadEditChatColorDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.thread;a=b("useWIGLazyDialog")(b("JSResource")("WorkGalahadChangeColourDialog.react").__setRef("WorkGalahadEditChatColorDropdownMenuItem.react"));var d=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"edit-chat-color",icons:"color",label:g._("\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0644\u0648\u0646"),onClick:function(){d({thread:c})}},"edit-chat-color")}e.exports=a}),null);
__d("WorkGalahadEditChatNameDropdownMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadRenameChatThreadDialog.react").__setRef("WorkGalahadEditChatNameDropdownMenuItem.react");function a(a){var c=a.onSave,d=a.previousThreadName;a=b("useWIGLazyDialog")(i);var e=a[0];return h.jsx(b("WIGDropdownMenuItem.react"),{id:"rename-chat",icons:"text",label:g._("\u0625\u0639\u0627\u062f\u0629 \u062a\u0633\u0645\u064a\u0629 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),hideOnClick:!1,onClick:function(){e({onSave:c,previousThreadName:d})}},"rename-chat")}e.exports=a}),null);
__d("WorkGalahadEditChatNicknamesDropdownMenuItem.react",["fbt","CurrentUser","JSResource","MercuryThreadActions","MercuryThreadInfo","React","WIGDropdownMenuItem.react","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("MWChatChangeNicknameDialog").__setRef("WorkGalahadEditChatNicknamesDropdownMenuItem.react");function a(a){var c=a.thread,d=babelHelpers.objectWithoutPropertiesLoose(a,["thread"]);a=b("useWIGLazyDialog")(i);var e=a[0];a=a[1];return h.jsx("div",{ref:a,children:h.jsx(b("WIGDropdownMenuItem.react"),{id:"edit-chat-nicknames",icons:"pencil_underline",label:g._("\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0646\u064a\u0627\u062a"),onClick:function(){var a;e(babelHelpers["extends"]({},d,{nicknames:(a=c.custom_nickname)!=null?a:{},onNicknameChange:function(a,d){b("MercuryThreadInfo").isEmptyLocalThread(c)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeThreadNicknames(c.thread_id,a,d,"thread_settings")}}))}},"edit-chat-nicknames")})}e.exports=a}),null);
__d("useWorkGalahadChatReportDialog",["requireCond","cr:1373380","MercuryIDs","MercuryThreadIDMap","cr:1373381","WIGFRX.entrypoint","useWIGEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d;c==null?d=b("MercuryIDs").getUserIDFromThreadID(a.thread_id):d=b("MercuryIDs").isLocalThread(a.thread_id)?b("MercuryThreadIDMap").get().getServerIDFromClientIDNow(a.thread_id):b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);d=btoa("message_thread:"+((d=d)!=null?d:""));d=b("useWIGEntryPointDialog")(b("WIGFRX.entrypoint"),{entryPoint:"REPORT_BUTTON",id:d,responsible_id:c!=null?b("MercuryIDs").tokenize(c).value:void 0,location:"messenger_direct_thread_details"});var e=d[0];return b("cr:1373380")&&b("cr:1373381")?function(){c!=null?b("cr:1373380").FRXClicked(a.thread_id,!0,c):b("cr:1373381").bootloadFRXDialog(a.thread_id)}:function(){return e({})}}e.exports=a}),null);
__d("WorkGalahadReportChatMenuItem.react",["fbt","JSResource","React","WIGDropdownMenuItem.react","useWIGLazyDialog","useWorkGalahadChatReportDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("JSResource")("WorkGalahadReportChatParticipantDialog.react").__setRef("WorkGalahadReportChatMenuItem.react");function a(a){var c=a.thread;a=a.isSubtitleVisible;var d=b("useWIGLazyDialog")(i),e=d[0],f=b("useWorkGalahadChatReportDialog")(c);return h.jsx(b("WIGDropdownMenuItem.react"),{id:"report-chat",icons:"report",label:g._("\u0627\u0644\u0625\u0628\u0644\u0627\u063a \u0639\u0646 \u062f\u0631\u062f\u0634\u0629"),desc:a?g._("\u064a\u0645\u0643\u0646\u0643 \u062a\u0642\u062f\u064a\u0645 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0648\u0627\u0644\u0625\u0628\u0644\u0627\u063a \u0639\u0646 \u0634\u064a\u0621 \u0642\u0627\u0645 \u0634\u062e\u0635 \u0645\u0627 \u0628\u0645\u0634\u0627\u0631\u0643\u062a\u0647 \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"):null,onClick:function(){c.is_canonical?f():e({thread:c,onClose:function(){}})}})}e.exports=a}),null);
__d("WorkGalahadChatMenuHelper",["fbt","requireCond","Arbiter","CurrentUser","FollowButtonFollowMutation","FollowButtonUnfollowMutation","JSResource","MercuryIDs","MercuryIgnoredBlockedParticipants.re","MercuryThreadActions","MercuryThreadInfo","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerComposerActions","MessengerGroupUtils.re","MessengerParticipants.re","MessengerState.re","QPLUserFlow","QPLUtils","React","WIGDropdownMenuItem.react","WorkForeignEntityInfo.re","WorkGalahadBlockChatDropdownMenuItem.react","WorkGalahadChangeChatEmojiDropdownMenuItem.react","WorkGalahadChangeChatPhotoMenuItem.react","WorkGalahadCreateGroupFromChatMenuItem.react","WorkGalahadDeleteChatMenuItem.react","WorkGalahadDropdownMenuHelper","WorkGalahadEditChatColorDropdownMenuItem.react","WorkGalahadEditChatNameDropdownMenuItem.react","WorkGalahadEditChatNicknamesDropdownMenuItem.react","WorkGalahadReportChatMenuItem.react","cr:1278240","cr:1278241","formatDate","gkx","immutable","nullthrows","stylex","useWIGLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("QPLUtils").deriveInstanceKey,j=b("React"),k=b("JSResource")("WorkGalahadLeaveThreadDialog.react").__setRef("WorkGalahadChatMenuHelper"),l=b("gkx")("1259767"),m={redLabel:{color:"eaqjevrq"},redLabelHovered:{color:"hk9qcz1a"}},n=3600,o={createMuteChatItems:function(a){var c=a==null?void 0:a.mute_until,d=g._("\u0643\u062a\u0645 \u0635\u0648\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),e=g._("\u0625\u064a\u0642\u0627\u0641 \u0645\u0624\u0642\u062a \u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0627\u0644\u0631\u0633\u0627\u0626\u0644"),f=o.isChatMuted(a);f&&(d=g._("\u0625\u0644\u063a\u0627\u0621 \u0643\u062a\u0645 \u0635\u0648\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),e=function(a){a=a.hovered;return j.jsx("span",{className:(h||(h=b("stylex")))(m.redLabel,a&&m.redLabelHovered),children:c===-1?g._("\u062a\u0645 \u0643\u062a\u0645 \u0627\u0644\u0635\u0648\u062a \u0644\u0623\u062c\u0644 \u063a\u064a\u0631 \u0645\u0633\u0645\u0649"):g._("\u062a\u0645 \u0643\u062a\u0645 \u0627\u0644\u0635\u0648\u062a \u062d\u062a\u0649 {date}",[g._param("date",b("formatDate")(c,{today:"g:ia",withinDay:"g:ia",thisYear:"M jS, g:ia",future:"M d, Y g:ia"}))])})});return f?[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-notification",label:d,desc:e,icons:"bell_null",onClick:function(){return o.unmuteChat(a)}},"chat-notification")]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-notification",label:d,desc:e,icons:"bell_null_cross",items:o.createChatMuteOptionsMenu(!0,function(b){o.muteChat(a,b)},a)},"chat-notification")]},isChatMuted:function(a){a=a==null?void 0:a.mute_until;return a!=null&&Number.isInteger(a)&&(a===-1||a*1e3>Date.now())},unmuteChat:function(a){if(a==null||!o.isChatMuted(a))return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,0)},muteChat:function(a,c){if(a==null)return;b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).updateMuteSetting(a.thread_id,c)},createGroupChatMuteExplanationItem:function(){return j.jsx(b("WIGDropdownMenuItem.react"),{id:"mention",label:g._("\u0623\u062b\u0646\u0627\u0621 \u0643\u062a\u0645 \u0627\u0644\u0635\u0648\u062a\u060c \u0633\u064a\u0633\u062a\u0645\u0631 \u0625\u0631\u0633\u0627\u0644 \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0625\u0644\u064a\u0643 \u0628\u0634\u0623\u0646 {\u0040mentions} \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629.",[g._param("@mentions",j.jsx("strong",{children:"@mentions"}))]),isStatic:!0},"mention")},createChatMuteOptionsMenu:function(a,c,d){return[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("\u0643\u062a\u0645 \u0635\u0648\u062a \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629...")},"mute-chat-header")].concat(o.createChatMuteOptionItems(a,c)).concat(d!=null&&!d.is_canonical?[j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"mute-chat-separator"),o.createGroupChatMuteExplanationItem()]:[])},createChatMuteOptionItems:function(a,c){var d;return[j.jsx(d=b("WIGDropdownMenuItem.react"),{id:"chat-mute-1-hour",label:g._("\u0644\u0645\u062f\u0629 \u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629"),onClick:function(){c(n)},navigateBackOnClick:a},"chat-mute-1-hour"),j.jsx(d,{id:"chat-mute-2-hour",label:g._("\u0644\u0645\u062f\u0629 \u0633\u0627\u0639\u062a\u064a\u0646"),onClick:function(){c(2*n)},navigateBackOnClick:a},"chat-mute-2-hour"),j.jsx(d,{id:"chat-mute-until-tomorrow",label:g._("\u062d\u062a\u0649 \u063a\u062f\u064b\u0627 \u0627\u0644\u0633\u0627\u0639\u0629 8 \u0635"),onClick:function(){var a=new Date(),b=a.getHours()>=8;b&&a.setDate(a.getDate()+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-until-tomorrow"),j.jsx(d,{id:"chat-mute-next-week",label:g._("\u062d\u062a\u0649 \u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u0642\u0627\u062f\u0645 (\u0627\u0644\u0625\u062b\u0646\u064a\u0646 \u0627\u0644\u0633\u0627\u0639\u0629 8 \u0635)"),onClick:function(){var a=new Date();a.setDate(a.getDate()+(7-a.getDay())%7+1);a.setHours(8,0,0,0);c(Math.ceil((a.getTime()-Date.now())/1e3))},navigateBackOnClick:a},"chat-mute-next-week"),j.jsx(d,{id:"chat-mute-until-changed",label:g._("\u062d\u062a\u0649 \u0623\u0642\u0648\u0645 \u0628\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0625\u0639\u062f\u0627\u062f"),onClick:function(){c(-1)},navigateBackOnClick:a},"chat-mute-until-changed")]},createCustomizeItems:function(a){var c=[];!a.is_canonical&&!a.work_associated_group&&(a.is_subscribed&&!a.is_canonical&&b("MessengerAdminGroupUtils").canUpdateThreadCustomization(a,b("CurrentUser").getAccountID())&&(b("gkx")("997564")||c.push(j.jsx(b("WorkGalahadEditChatNameDropdownMenuItem.react"),{previousThreadName:a.name,onSave:function(c){b("MercuryThreadInfo").isEmptyLocalThread(a)||b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).changeGroupThreadName(a.thread_id,c)}},"rename-chat")),c.push(j.jsx(b("WorkGalahadChangeChatPhotoMenuItem.react"),{icons:"photo",label:g._("\u062a\u063a\u064a\u064a\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),threadID:a.thread_id},"change-chat-photo"),j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"customize-options-separator"))));a.customization_enabled&&(c.push(j.jsx(b("WorkGalahadEditChatNicknamesDropdownMenuItem.react"),{thread:a,participants:b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{})).toObject(),onClose:function(){}},"edit-chat-nicknames")),c.push(j.jsx(b("WorkGalahadEditChatColorDropdownMenuItem.react"),{thread:a},"edit-chat-color")),c.push(j.jsx(b("WorkGalahadChangeChatEmojiDropdownMenuItem.react"),{thread:a},"change-chat-emoji")));if(c.length===0)return[];var d=a.is_canonical||a.work_associated_group?g._("\u064a\u0645\u0643\u0646\u0643 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u062a\u0639\u0628\u064a\u0631\u064a \u0648\u0627\u0644\u0643\u0646\u064a\u0627\u062a \u0648\u063a\u064a\u0631 \u0630\u0644\u0643 \u0627\u0644\u0643\u062b\u064a\u0631"):g._("\u064a\u0645\u0643\u0646\u0643 \u062a\u0639\u062f\u064a\u0644 \u0627\u0633\u0645 \u0648\u0635\u0648\u0631\u0629 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0648\u063a\u064a\u0631 \u0630\u0644\u0643 \u0627\u0644\u0643\u062b\u064a\u0631");return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"customize-chat",icons:"pencil",label:g._("\u062a\u062e\u0635\u064a\u0635 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),desc:d,items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("\u062a\u062e\u0635\u064a\u0635 \u0627\u0644\u062f\u0631\u062f\u0634\u0629")},"customize-chat-header")].concat(c)},"customize-chat")]},getOnHideChatCallback:function(a){return function(){var c;p((c=a.thread_fbid)!=null?c:"");c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_pinned===!0&&c.unpin(a.thread_id);c.archive(a.thread_id);b("MessengerActions").selectThread(null)}},getOnUnhideChatCallback:function(a){return function(){var c=b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID());a.is_archived===!0&&c.unarchive(a.thread_id);a.folder===b("MessagingTag").OTHER&&c.changeFolder(a.thread_id,b("MessagingTag").INBOX);b("MessengerActions").selectThread(a.thread_id)}},createHideChatItems:function(a){var c=a.folder===b("MessagingTag").OTHER;if(!a.is_archived&&!c)return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"hide-chat",label:l?g._("\u0623\u0631\u0634\u0641\u0629"):g._("\u0625\u062e\u0641\u0627\u0621 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),icons:l?"box":"hide",desc:l?null:g._("\u064a\u0645\u0643\u0646\u0643 \u0625\u062e\u0641\u0627\u0621 \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0645\u0646 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0648\u0627\u0631\u062f \u0644\u062f\u064a\u0643"),onClick:this.getOnHideChatCallback(a)},"hide-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unhide-chat",label:l?g._("\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0623\u0631\u0634\u0641\u0629"):g._("\u0625\u0644\u063a\u0627\u0621 \u0625\u062e\u0641\u0627\u0621 \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),icons:"undo",desc:l?null:g._("\u064a\u0645\u0643\u0646\u0643 \u0639\u0631\u0636 \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0641\u064a \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0648\u0627\u0631\u062f"),onClick:this.getOnUnhideChatCallback(a)},"unhide-chat")]},createRemoveChatItems:function(a){return[j.jsx(b("WorkGalahadDeleteChatMenuItem.react"),{thread:a},"delete-chat-wrapper")]},useBlockMessagesItems:function(a){var c=b("CurrentUser").getID(),d=!1;b("MessengerState.re").compute(c,function(e){e=e.blocked_ids;d=b("MercuryIgnoredBlockedParticipants.re").qualifiesAs(c,e,a)});var e=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);e=e!=null?b("MessengerParticipants.re").getNow(e):null;if(e==null)return[];return!b("MercuryIgnoredBlockedParticipants.re").shouldShowBlock(a,c,e)?[]:[j.jsx(b("WorkGalahadBlockChatDropdownMenuItem.react"),{isBlocked:d,thread:a},"block-chat")]},createReportChatItems:function(a,c){var d=b("CurrentUser").getID();if(a.message_count===0||a.participants.length<=1)return[];return a.participants.map(function(a){return b("MessengerParticipants.re").getNow(a)}).find(function(a){return(a==null?void 0:a.id)!==b("MercuryIDs").getParticipantIDFromUserID(d)&&(a==null?void 0:a.user_type)!=="page"})==null?[]:[j.jsx(b("WorkGalahadReportChatMenuItem.react"),{thread:a,isSubtitleVisible:c},"report-chat")]},createChatPrivacySubMenuItems:function(a){if(a==null)return[];var c=a.other_user_fbid===b("CurrentUser").getID(),d=b("MercuryThreadInfo").isEmptyLocalThread(a),e=this.useBlockMessagesItems(a);if(!a.is_subscribed||c||d)return[];c=o.createReportChatItems(a,!0);return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([[].concat(c),[].concat(e)])},createPrivacyItems:function(a){var c=o.createChatPrivacySubMenuItems(a);if(a==null)return[];if(c.length===0)return[];return c.length===1?o.createReportChatItems(a,!1):[j.jsx(b("WIGDropdownMenuItem.react"),{id:"privacy-chat-options",icons:"privacy",label:g._("\u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u062e\u0635\u0648\u0635\u064a\u0629"),items:[j.jsx(b("WIGDropdownMenuItem.react").Header,{id:"privacy-options-header",label:g._("\u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u062e\u0635\u0648\u0635\u064a\u0629")},"privacy-options-header")].concat(c)},"privacy-chat-options")]},createAddMembersItems:function(a){return b("cr:1278240")?[j.jsx(b("cr:1278240"),{thread:a},"add-members")]:[]},createPinOrUnpinItems:function(a){if(!a.is_pinned&&(!a.is_subscribed||a.message_count===0))return[];if(!a.is_pinned)return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"pin-chat",icons:"pushpin",label:l?g._("\u062a\u062b\u0628\u064a\u062a \u0641\u064a \u0627\u0644\u0623\u0639\u0644\u0649"):g._("\u062a\u062b\u0628\u064a\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),desc:l?null:g._("\u064a\u0645\u0643\u0646\u0643 \u062a\u062b\u0628\u064a\u062a \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0641\u064a \u0623\u0639\u0644\u0649 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0648\u0627\u0631\u062f"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).pin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")];else return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unpin-chat",icons:"pushpin_slash",label:l?g._("\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062a\u062b\u0628\u064a\u062a"):g._("\u0625\u0644\u063a\u0627\u0621 \u062a\u062b\u0628\u064a\u062a \u0627\u0644\u062f\u0631\u062f\u0634\u0629"),desc:l?null:g._("\u064a\u0645\u0643\u0646\u0643 \u0625\u0644\u063a\u0627\u0621 \u062a\u062b\u0628\u064a\u062a \u0647\u0630\u0647 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u0641\u064a \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0648\u0627\u0631\u062f"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).unpin(a.thread_id,"menu_item_in_overflow_menu")}},"pin-unpin-chat")]},createFollowOrUnfollowItems:function(a,c){if(a.participants.length>2||a.other_user_fbid==null||!b("gkx")("997564"))return[];if(c==="CAN_SUBSCRIBE")return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"follow",icons:"follow",label:g._("\u0645\u062a\u0627\u0628\u0639\u0629 \u0641\u064a \u0622\u062e\u0631 \u0627\u0644\u0623\u062e\u0628\u0627\u0631"),onClick:function(){b("FollowButtonFollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"follow")];else if(c==="IS_SUBSCRIBED")return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"unfollow",icons:"unfollow",label:g._("\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0641\u064a \u0622\u062e\u0631 \u0627\u0644\u0623\u062e\u0628\u0627\u0631"),onClick:function(){b("FollowButtonUnfollowMutation").commit(b("nullthrows")(a.other_user_fbid),"PROFILE")}},"unfollow")];else return[]},createAdminOptionsItems:function(a){var c=b("MessengerAdminGroupUtils").isAdmin(a.admins,b("CurrentUser").getID());if(a.is_canonical||!c)return[];c=!b("MessengerAdminGroupUtils").isApprovalOpenThread(a);c=[j.jsx(b("WIGDropdownMenuItem.react").Header,{label:g._("\u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0639\u0636\u0648\u064a\u0629")},"chat-admin-options-header"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{id:"membership-approval-on",label:g._("\u0642\u064a\u062f \u0627\u0644\u062a\u0634\u063a\u064a\u0644"),desc:g._("\u064a\u0645\u0643\u0646 \u0644\u0644\u0645\u0633\u0624\u0648\u0644\u064a\u0646 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0634\u062e\u0627\u0635 \u0627\u0644\u062c\u062f\u062f \u0627\u0644\u0630\u064a\u0646 \u062a\u062a\u0645 \u0625\u0636\u0627\u0641\u062a\u0647\u0645 \u0628\u0648\u0627\u0633\u0637\u0629 \u063a\u064a\u0631 \u0627\u0644\u0645\u0633\u0624\u0648\u0644\u064a\u0646."),isChecked:c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(1,a)}},"membership-approval-on"),j.jsx(b("WIGDropdownMenuItem.react").Radio,{id:"membership-approval-off",label:g._("\u0645\u062a\u0648\u0642\u0641\u0629"),desc:g._("\u064a\u0645\u0643\u0646 \u0644\u0623\u064a \u0639\u0636\u0648 \u0625\u0636\u0627\u0641\u0629 \u0623\u0634\u062e\u0627\u0635 \u062c\u062f\u062f \u0625\u0644\u0649 \u0627\u0644\u062f\u0631\u062f\u0634\u0629 \u062f\u0648\u0646 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629."),isChecked:!c,onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getAccountID()).setApprovalMode(0,a)}},"membership-approval-off")];var d=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));d=!b("WorkForeignEntityInfo.re").areAllCoworkers(d);a.is_subscribed&&!a.work_associated_group&&!d&&(c.push(j.jsx(b("WIGDropdownMenuItem.react").Separator,{},"admin-create-group-option-separator")),c.push(j.jsx(b("WorkGalahadCreateGroupFromChatMenuItem.react"),{thread:a},"create-group")));return[j.jsx(b("WIGDropdownMenuItem.react"),{id:"chat-admin-options",icons:"badge_admin",label:g._("\u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0645\u0633\u0624\u0648\u0644"),items:c},"chat-admin-options")]},useCreateLeaveItems:function(a){var c=b("useWIGLazyDialog")(k),d=c[0];return a==null||a.is_canonical||!a.is_subscribed?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"leave-chat",icons:"leave",label:g._("\u0645\u063a\u0627\u062f\u0631\u0629"),onClick:function(){d({thread:a})}},"leave-chat")]},createNewGroupChatItems:function(a){return!a.is_canonical_user&&a.thread_type===1?[]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"new-chat",icons:"messages_compose",label:g._("\u0625\u0646\u0634\u0627\u0621 \u062f\u0631\u062f\u0634\u0629 \u062c\u0645\u0627\u0639\u064a\u0629 \u062c\u062f\u064a\u062f\u0629"),onClick:function(){var c=b("immutable").OrderedMap(a.participants.reduce(function(a,c){return babelHelpers["extends"]({},a,(a={},a[c]=b("MessengerParticipants.re").getNow(c),a))},{}));b("MessengerComposerActions").exitComposeStateAbandonSearch();b("MessengerGroupUtils.re").createGroupThread(c,b("CurrentUser").getID())}},"new-chat")]},createMarkAsReadOrUnreadItems:function(a){return a.unread_count>0?[j.jsx(b("WIGDropdownMenuItem.react"),{id:"mark-as-read",icons:"envelope_open",label:g._("\u062a\u062d\u062f\u064a\u062f \u0643\u0645\u0642\u0631\u0648\u0621"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markRead(a.thread_id)}},"mark-as-read-unread")]:[j.jsx(b("WIGDropdownMenuItem.react"),{id:"mark-as-unread",icons:"envelope",label:g._("\u062a\u0645\u064a\u064a\u0632 \u0643\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621"),onClick:function(){b("MercuryThreadActions").getForFBID(b("CurrentUser").getID()).markUnread(a.thread_id)}},"mark-as-read-unread")]},createChatChannelOverflowMenuItems:function(a){if(l){var c;return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([b("cr:1278241")?[j.jsx(b("cr:1278241"),{thread:a,groupID:(c=a.work_associated_group)==null?void 0:c.id,isMuted:a.mute_until!=null},"notification-options")]:null,[].concat(o.createPinOrUnpinItems(a),o.createMarkAsReadOrUnreadItems(a)),[].concat(o.createHideChatItems(a),o.useCreateLeaveItems(a))].filter(Boolean))}return b("WorkGalahadDropdownMenuHelper").createItemsFromSections([o.createPinOrUnpinItems(a),[].concat(o.createMuteChatItems(a),o.createHideChatItems(a)),[].concat(o.createMarkAsReadOrUnreadItems(a),o.createRemoveChatItems(a),o.useCreateLeaveItems(a))])}};function p(a){var c,d={instanceKey:i((c=a)!=null?c:"")};b("QPLUserFlow").start(57409537,d);var e=b("Arbiter").subscribe(["AsyncRequest/response","AsyncRequest/error","AsyncRequest/timeout"],function(c,f){var g=null;f=Object.keys((f=f==null?void 0:(f=f.request)==null?void 0:(f=f.data)==null?void 0:f.ids)!=null?f:{});Array.isArray(f)&&f.length>0&&(g=f[0]);if(a!==g)return;e.unsubscribe();c==="AsyncRequest/response"?b("QPLUserFlow").endSuccess(57409537,d):b("QPLUserFlow").endFailure(57409537,d)})}e.exports=o}),null);
__d("WorkGalahadChatChannelOverflowMenu.react",["React","WIGDropdownMenu.react","WorkGalahadChatMenuHelper"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.label;a=a.thread;return g.jsx(b("WIGDropdownMenu.react"),{items:b("WorkGalahadChatMenuHelper").createChatChannelOverflowMenuItems(a),label:c,width:280,offsetX:-12})}e.exports=g.memo(a)}),null);